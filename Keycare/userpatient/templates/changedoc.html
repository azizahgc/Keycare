{% extends 'docpatient.html' %}

{% block content %}
<h2>Change Doctor</h2>

<p>Currently assigned doctor: {{ patient_profile.assigned_doc.user.first_name }} {{ patient_profile.assigned_doc.user.last_name }}</p>

<form method="POST">
    {% csrf_token %}
    <label for="Doctor">Select a new doctor:</label>
    <select name="Doctor" id="Doctor" required>
        {% for item in doctor_info %}
        <option value="{{ doctor.id }}" {% if patient_profile.assigned_doc.id == doctor.id %}selected{% endif %}>
            {{ item.doctor.first_name }} {{ item.doctor.last_name }} - {{ item.doctor.departement }}
        </option>
        {% endfor %}
    </select>

    <button type="submit">Change Doctor</button>
</form>

{% endblock %}

<script>
    const form = document.querySelector('form');
    form.addEventListener('submit', function(event) {
        const confirmation = confirm("Are you sure you want to change your doctor?");
        if (!confirmation) {
            event.preventDefault();  // Prevent form submission if user cancels
        }
    });
</script>